!function(t){var e;e=function(t){var e=void 0!==t?t:{};function i(t){return void 0===t}function L(t){return!i(t)}function T(t){return L(t)&&"function"==typeof t}function N(t){return L(t)&&"[object Object]"==Object.prototype.toString.call(t)}function S(t){return L(t)&&"string"==typeof t}function H(t){return L(t)&&"boolean"==typeof t}function R(t){return H(t)&&t}function z(t){return H(t)&&!t}function M(t){return L(t)&&"number"==typeof t}var a=function(t,e){t.classList?t.setAttribute("class",e):t.className=e},s=function(t,e){t.setAttribute("id",e)};function U(t){if(t.preventDefault)t.preventDefault();else{if(!t.stopPropagation)return!1;t.stopPropagation()}}function j(t,e,o){if(L(t)){if(T(t.forEach))return void t.forEach(e,o||{});for(var n=0;n<t.length;n++)T(e)?e.call(o||null,t[n],n):nul}}function $(t){return o=" ",S(e=t)&&e.search(o)+1?t.replace(/(\s*)/g,""):t;var e,o}function G(t,e){if(i(e))return null;if(N(e)){for(var o in e)t[o]=e[o];return t}}function F(t,e,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent&&t.attachEvent("on"+e,o)}function q(t,e,o){t.removeEventListener?t.removeEventListener(e,o,!1):t.detachEvent("on"+e,o)}function W(t){return Array.isArray?Array.isArray(t):!!(L(e=t)&&e instanceof Array);var e}function l(t,e){if(S(t)||M(e)){for(var o=0,n=e.length;o<n;o++)if(e[o]==t)return 1;return!1}return!1}function P(t,e){var o=[Array.prototype.slice.apply(arguments).slice(2)];return S(e)?(t.classList?t.setAttribute("class",n(o[0],"classList")+e):t.className&&t.setAttribute("class",n(o[0],"className")+e),null):t.className||t.classList}function n(t,e){for(var o="",n=t.length,i=0;i<n;i++)"object"==typeof t[i]&&(o+=t[i][e]);return o}var r=function(t,e){for(var o in e)if(L(t.style[o]))return e[o]},c=function(t,e){var o=document.body,n=o.offsetWidth;if(e){P(o,t,document.body),P(document.documentElement,t,document.documentElement);var i=o.offsetWidth;o.style.paddingRight=i-n+"px"}else{if(!L(P(document.body)||P(document.documentElement)))return null;P(document.body,P(document.body).replace(t,""),""),P(document.documentElement,P(document.documentElement).replace(t,""),""),o.style.paddingRight="0"}},X={title:"",message:"",footerText:"",layout:"center",timeout:null,isGesture:!0,isDrag:!1,isClose:!0,onResize:!0,type:"",isMask:!0,animation:!0,customAnimation:"bounceIn",titleColor:"#9A9B9C",closeColor:"#9A9B9C",messageColor:"#696969",showCloseButton:!0,showCancleButton:!1,showConfirmButton:!0,cancleButtonText:"取消",confirmButtonText:"确定",cancleButtonColor:"#fff",confirmButtonColor:"#fff",cancleButtonBackground:"#aaa",confirmButtonBackground:"#45B680",methods:function(){},onDialogBefore:function(){},onHeaderBefore:function(){},onBodyBefore:function(){},onFooterBefore:function(){},onDialogAfter:function(){},onHeaderAfter:function(){},onBodyAfter:function(){},onFooterAfter:function(){},confirmCallback:null,cancleCallback:null},o=["bounce","flash","pulse","rubberBand","shake","headShake","swing","tada","wobble","jello","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","fadeOut","fadeOutDown","fadeOutDownBig","fadeOutLeft","fadeOutLeftBig","fadeOutRight","fadeOutRightBig","fadeOutUp","fadeOutUpBig","flipInX","flipInY","flipOutX","flipOutY","lightSpeedIn","lightSpeedOut","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","hinge","jackInTheBox","rollIn","rollOut","zoomIn","zoomInDown","zoomInLeft","zoomInRight","zoomInUp","zoomOut","zoomOutDown","zoomOutLeft","zoomOutRight","zoomOutUp","slideInDown","slideInLeft","slideInRight","slideInUp","slideOutDown","slideOutLeft","slideOutRight","slideOutUp"],d={excuteAnimation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd",MSAnimation:"MSAnimationEnd"},u={excuteAnimation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart",MSAnimation:"MSAnimationStart"},f=function(t){this.didDialogList=[],this.dialogElement=t||null,this.strict={header:".dialog-header",body:".dialog-body",footer:".dialog-footer"},this.cacheDialogElement=[],this.setTimer=null,this.name="codialog",this.mouseoutcount=0,this.rootDirectory={},this.closeBackValue=!1,this.xString=[],this.hasAnimation=!0,this.customAnimation="bounceOut"};f.prototype.app=function(t){if(l(t,this.cacheDialogElement))this.dialogElement=t;else if(!this.appPushNewElements(t))return window.console.warn('this methods .app("'+t+'") accepts wrong parameters.','you must define correct "class" and "id" and "_"')&&!1;return this},f.prototype.appPushNewElements=function(t){if(S(t),t.search(/^(\.|\#)/),t.slice(1).search(/^[\_|(a-zA-Z)]/)+1){var e=(o=t,n=document.createElement("div"),"."==o.charAt(0)&&a(n,o.slice(1)),"#"==o.charAt(0)&&s(n,o.slice(1)),n);return e.innerHTML+='<div mask="" class="codialog-mask" aria-hidden="false"><div dialog="" class="codialog-frame" role="dialog" aria-dialog="true"><div aria-dialogBox="true" class="codialog-box"><div class="codialog-fixed"><div class="codialog-styles"><div header="" class="codialog-styles-head dialog-header"><div class="codialog-head-content"><div title="" ref="title" class="codialog-head-title codialog-head-info"><span ></span></div><div close="" ref="close" class="codialog-head-close"><button type="button" class="addClose">×</button></div></div></div><div body="" class="codialog-styles-content dialog-body"><div class="codialog-content-message" dialog-body-overflow><div class="codialog-icon codialog-icon-success"><div class="codialog-success-ring"></div><span class="codialog-icon-success--line-small"></span><span class="codialog-icon-success--line-long"></span></div><div class="codialog-icon codialog-icon-error"><span class="codialog-icon-error--line-left"></span><span class="codialog-icon-error--line-right"></span></div><div class="codialog-icon codialog-icon-warning"><span class="codialog-icon-error--text">!</span></div><div class="codialog-icon codialog-icon-info"><span class="codialog-icon-info--text">!</span></div><div class="codialog-icon codialog-icon-question"><span class="codialog-icon-question--text">?</span></div><div message="" ref="message" class="codialog-message-text message-text codialog-text"><span ></span></div></div></div><div footer="" class="codialog-styles-foot dialog-footer"><div class="codialog-foot-button codialog-foot-text"><div textGroup="" ref="text" class="codialog-text-group"></div><div buttonGroup="" ref="button" class="codialog-button-group"><button type="button" confirm="" class="primary group-btn">确定</button><button type="button" cancle="" class="cancle group-btn">取消</button></div></div></div></div></div></div></div></div>',document.body.appendChild(e),this.dialogElement=t||null,this.cacheDialogElement.push(t),!0}return!1;var o,n},f.prototype.hide=function(t){var e=this,o=this.$(this.dialogElement);if(S(t))l(t,this.cacheDialogElement)&&m.call(this,t+" [mask]",this.$(t));else if(N(t)){var n=Number(t.timeout);"timeout"in t&&M(n)&&0<n&&(this.setTimer=setTimeout(function(){o.style.display="none",c(" codialog-show",!1),clearTimeout(e.setTimer)},n)),"callback"in t&&T(t.callback)&&t.callback(o)}else i(t)&&(o.style.display="none",c(" codialog-show",!1));return this},f.prototype.show=function(t){var e=this,o=this.$(this.dialogElement);if(S(t))l(t,this.cacheDialogElement)&&h(this,t+" [dialog]",o);else if(N(t)){var n=Number(t.timeout);"timeout"in t&&M(n)&&0<n&&(this.setTimer=setTimeout(function(){o.style.display="block",c(" codialog-show",!0),t.timeout=null,clearTimeout(e.setTimer)},n)),"callback"in t&&T(t.callback)&&t.callback(o)}else i(t)&&h.call(this,e.dialogElement+" [dialog]",o);return this};var m=function(t,e){if(document.querySelector&&document.addEventListener){if(null==r(e,d))return e.style.display="none",c(" codialog-show",!1),null;this.animate(t).delay(100).fadeOut("fadeOut",{type:"end",callback:function(){e.style.display="none",c(" codialog-show",!1)}}).render()}else e.style.display="none",c(" codialog-show",!1)},h=function(t,e){var o="bounceIn";if(document.querySelector&&document.addEventListener){if(null==r(e,d))return e.style.display="block",c(" codialog-show",!0),null;z(this.hasAnimation)&&(o=this.customAnimation||o),this.animate(t).delay(100)[o](o,{type:"start",callback:function(){e.style.display="block",c(" codialog-show",!0)}}).render()}else e.style.display="block",c(" codialog-show",!0)};f.prototype.$=function(t){return 9===t.nodeType?t.documentElement:T(t.HTMLDocument)?t:this.find(document.body,t)},f.prototype.getElementsByClassName=function(t,e){if(T(t.getElementsByClassName)){for(var o=t.getElementsByTagName("*"),n=o.length,i=[],a=0;a<n;a++){if(S(o[a].className))if(l(e,o[a].className.split(" "))){i.push(o[a]);break}}return i[0]}},f.prototype.find=function(t,e,o){if("object"==typeof t&&S(e)){if(e.search(/^(\.)/)+1)return this.getElementsByClassName(9==t.nodeType?document:t,e.slice(1));if(e.search(/^(\#)/)+1)return t.getElementById(e.slice(1));if(e.search(/^(\s*)(\[.*\])/g)+1){var s=[];return function t(e,o,n){if(e.length){for(var i=0,a=e.length;i<a;i++){if(S(e[i].getAttribute(o))){if(s.push(e[i]),W(n))continue;break}if(1==e.length)return t(e[i].children,o,n);if(!(1<a&&i<a))return}return W(n)?s:s[0]}}(t.children,e.slice(1,e.length-1),o)}return t.getElementsByTagName(e)}},f.prototype.use=function(m,t){var o=this,h=this.$(this.dialogElement),g=this.find(h,"[dialog]"),e=this.find(h,"[mask]"),n=this.find(h,"[header]"),i=this.find(h,"[body]"),a=this.find(h,"[footer]");if(G(this.rootDirectory,{dialog:g,mask:e,header:n,body:i,footer:a}),arguments.length&&S(m)&&(this.xString,this.xString=arguments)){switch(this.xString.length){case 1:m={message:this.xString[0],onHeaderBefore:function(){this.style.display="none"}};break;case 2:var s=this.xString[1];m={title:this.xString[0],message:S(s)?s:"No message text"};break;case 3:default:s=this.xString[1];var l=this.xString[2];m={title:this.xString[0],message:S(s)?s:"No message",type:S(l)?l:""}}this.xString=[]}var r,c=this.find(a,"[buttonGroup]"),d=function(t){if(t instanceof Object)return L(JSON)?JSON.parse(JSON.stringify(t)):t}(X);if(N(m=G(d,m))){if((m.onDialogBefore||m.onHeaderBefore||m.onBodyBefore||m.onFooterBefore)&&(T(m.onDialogBefore)&&m.onDialogBefore.call(g,g),T(m.onHeaderBefore)&&m.onHeaderBefore.call(n,n),T(m.onBodyBefore)&&m.onBodyBefore.call(i,i),T(m.onFooterBefore)&&m.onFooterBefore.call(a,a)),M(m.timeout)&&0<Number(m.timeout)&&this.hide({timeout:m.timeout}),z(m.isMask)&&this.find(h,"[mask]")&&(this.find(h,"[mask]").style.backgroundColor="transparent"),R(m.isDrag)){var u=!0,f={},p={},y={};R(m.isGesture)?g.style.cursor="move":g.style.cursor="unset",F(g,"mousedown",function(t){f={x:g.offsetLeft-document.body.scrollLeft,y:g.offsetTop-document.body.scrollTop},p={x:t.screenX,y:t.screenY},u=!0;var e=function(t){u&&(y={x:t.screenX,y:t.screenY},f.x+=y.x-p.x,f.y+=y.y-p.y,p=y,g.style.left=f.x+"px",g.style.top=f.y+"px")};F(o.$(document),"mousemove",e),F(o.$(document),"mouseup",function(t){q(g.ownerDocument,"mouseover",e),u=!1,U(t)}),U(t)})}var b,v,w,x;if(S(m.footerText)&&this.find(a,"[textGroup]")?this.find(a,"[textGroup]").innerHTML=m.footerText:W(m.footerText)&&this.find(a,"[textGroup]")?0<m.footerText.length&&(this.find(a,"[textGroup]").innerHTML=m.footerText.concat().join("")):this.find(a,"[textGroup]")&&!L(r=this.find(a,"[textGroup]"))&&(r.parentElement.removeChild?r.parentElement.removeChild(r):r.parentElement.removeNode(r)),(b=this.find(n,"[title]"))&&b&&(b.innerHTML=m.title,b.style.color=m.titleColor),(b=this.find(i,"[message]"))&&b&&(b.innerHTML=this.message||m.message,b.style.color=m.messageColor),(b=this.find(c,"[confirm]"))&&b&&(b.textContent=m.confirmButtonText,b.style.color=m.confirmButtonColor,b.style.background=m.confirmButtonBackground),(b=this.find(c,"[cancle]"))&&b&&(b.textContent=m.cancleButtonText,b.style.color=m.cancleButtonColor,b.style.background=m.cancleButtonBackground),(b=this.find(n,"[close]"))&&b&&(b.style.color=m.closeColor),S(m.type)){var B=["success","error","warning","info","question"];switch(m.type.toLowerCase()){case B[0]:o.find(i,".codialog-icon-"+B[0]).style.display="flex";break;case B[1]:o.find(i,".codialog-icon-"+B[1]).style.display="flex";break;case B[2]:o.find(i,".codialog-icon-"+B[2]).style.display="flex";break;case B[3]:o.find(i,".codialog-icon-"+B[3]).style.display="flex";break;case B[4]:o.find(i,".codialog-icon-"+B[4]).style.display="flex"}}if(T(m.methods)&&(this.$methods(),m.methods.call(this,this.dialogElement)),R(m.isClose)){var k=this.$(this.dialogElement),A=[],E=this.find(n,"[close]");L(E)&&A.push(E);var C=this.find(c,"[cancle]");L(c),L(C)&&A.push(C);var O=this.find(c,"[confirm]");L(c),L(O)&&A.push(O),0<A.length&&j(A,function(t,e){t.onclick=function(t){o.hide(k.className.length?"."+k.className:"#"+k.getAttribute("id")),clearTimeout(o.setTimer),2==e&&T(m.confirmCallback)?m.confirmCallback():1==e&&T(m.cancleCallback)&&m.cancleCallback(),o.closeBackValue=!0}})}function D(){var t=(document.documentElement||document.body).clientWidth,e=(document.documentElement||document.body).clientHeight,o=!1;"block"!=h.style.display&&(h.style.zIndex="-9999",h.style.display="block",o=!0);var n=g.offsetWidth,i=g.offsetHeight;o&&(o=!(h.style.display="none")),h.style.zIndex="9999";for(var a=t/2,s=e/2,l=n/2,r=i/2,c=m.layout.toLowerCase().split(" "),d=[],u=0;u<c.length;u++)c[u].length&&d.push(c[u]);function f(){g.style.left=a-l+"px",g.style.top=s-r+"px"}if(1==(c=d).length)switch(c=$(c[0])){case"center":f();break;case"left":g.style.left="10px",g.style.top=s-r+"px";break;case"right":g.style.left=t-n-10+"px",g.style.top=s-r+"px";break;case"top":g.style.left=a-l+"px",g.style.top="10px";break;case"bottom":g.style.left=a-l+"px",g.style.top=e-i-10+"px";break;default:f()}else 1<c.length&&("left top"==(c=c.join(" "))||"top left"==c?(g.style.left="10px",g.style.top="10px"):"left bottom"==c||"bottom left"==c?(g.style.left="10px",g.style.top=e-i-10+"px"):"right top"==c||"top right"==c?(g.style.left=t-n+10+"px",g.style.top="10px"):"right bottom"==c||"bottom right"==c?(g.style.left=t-n+"px",g.style.top=e-i-10+"px"):f())}z(m.showCloseButton)&&(v=this.find(n,"[close]"))&&L(v)&&(v.style.display="none"),R(m.showCancleButton)&&(w=this.find(c,"[cancle]"))&&L(w)&&(w.style.display="inline-block"),z(m.showConfirmButton)&&(x=this.find(c,"[confirm]"))&&L(x)&&(x.style.display="none"),(m.onDialogAfter||m.onHeaderAfter||m.onBodyAfter||m.onFooterAfter)&&(T(m.onDialogAfter)&&m.onDialogAfter.call(g,g),T(m.onHeaderAfter)&&m.onHeaderAfter.call(n,n),T(m.onBodyAfter)&&m.onBodyAfter.call(i,i),T(m.onFooterAfter)&&m.onFooterAfter.call(a,a)),S(m.layout)&&m.layout.length&&D(),R(m.onResize)&&(window.onresize=function(){D()})}var I=!1;return e.onclick=function(t){I?I=!1:((t=t||window.event).target||t.srcElement)==e&&(clearTimeout(o.setTimer),o.$(o.dialogElement).style.display="none",P(document.body,P(document.body).replace(" codialog-show",""),""),P(document.documentElement,P(document.documentElement).replace(" codialog-show",""),""),document.body.style.paddingRight="0")},e.onmousedown=function(){g.onmouseup=function(t){g.onmouseup=null,(((t=t||window.event).target||t.srcElement)==g||g.contains(t.target||t.srcElement))&&(I=!0)}},g.onmousedown=function(){e.onmouseup=function(t){e.onmouseup=null,((t=t||window.event).target||t.srcElement)==e&&(I=!0)}},H(m.animation)&&h&&(m.animation?this.hasAnimation=!0:S(m.customAnimation)&&(this.hasAnimation=!1,this.customAnimation=m.customAnimation)),this},f.prototype.$methods=function(t){return this.header=this.onHeader({children:this.rootDirectory.header}),this.body=this.onBody({children:this.rootDirectory.body}),this.footer=this.onFooter({children:this.rootDirectory.footer}),T(t)&&t.call(this,this.dialogElement),this},["onHeader","onBody","onFooter"].map(function(t){f.prototype[t]=function(t){return{$refs:function(t){var e=new Object;return j(this.find(t.children,"[ref]",[]),function(t){e[t.getAttribute("ref")]=t}),e}.call(this,t)}}}),f.prototype.animate=function(t){return new g(t)};var g=function(t){this.listItems=[t],this.wait=[],this.animationName="bounceOut",this.animationConfig={}};g.prototype.excuteAnimation=function(t,e,o){var n=document.querySelector(t),i=r(n,d),a=r(n,u);"end"==o.type.toLowerCase()?P(n," "+e+" animatedHalf",n):P(n," "+e+" animated",n);var s=function(){o.type;q(n,a,l)},l=function(){"end"==o.type.toLowerCase()?(o.callback(e),P(n,P(n).replace(" "+e+" animatedHalf",""),"")):P(n,P(n).replace(" "+e+" animated",""),""),q(n,i,l),q(n,a,s)};F(n,i,l),F(n,a,s)};for(var p=function(t,e){this.animationName=t;var o=(this.animationConfig=e).callback;return"start"==e.type&&(T(o),1)&&o(),this},y=0,b=o.length;y<b;y++)g.prototype[o[y]]=p;g.prototype.delay=function(t){return L(t)&&this.wait.push(Number(t)),this},g.prototype.render=function(){this.excuteAnimation(this.listItems.slice(0),this.animationName,this.animationConfig)},G(e,new f),G(e,{addEventListener:F})},"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],e):e(window.coog={}),"undefined"!=typeof document&&window.coog&&(window.coDialog=window.codialog=window.Codialog=window.CoDialog=window.Coog=window.coog)}("undefined"!=typeof window||global);