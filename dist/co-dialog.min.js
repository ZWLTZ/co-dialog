!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Coog=e()}(this,function(){"use strict";function o(t){return void 0===t}function c(t){return!o(t)}function u(t){return c(t)&&"function"==typeof t}function l(t){return c(t)&&"[object Object]"==Object.prototype.toString.call(t)}function f(t){return c(t)&&"[object Null]"==Object.prototype.toString.call(t)}function e(t){return c(t)&&t instanceof Array}function m(t){return c(t)&&"string"==typeof t}function n(t){return c(t)&&"boolean"==typeof t}function d(t){return c(t)&&"number"==typeof t}function h(t){return n(t)&&t}function p(t){return n(t)&&!t}function a(t,e){return!!(m(t)&&t.search(e)+1)}function y(t){return a(t," ")?t.replace(/(\s*)/g,""):t}function g(t,e,n){if(c(t)){if(u(t.forEach))return void t.forEach(e,n||{});for(var o=0;o<t.length;o++)u(e)?e.call(n||null,t[o],o):nul}}function t(t,e){if(o(e))return null;if(l(e)){for(var n in e)t[n]=e[n];return t}}function b(t){return Array.isArray?Array.isArray(t):!!e(t)}function i(e){x.map(function(t){e[t]=function(t){return{$refs:function(t,e){var n=new Object,o=t.find(e.children,"[ref]",[]);return g(o,function(t){t.getAttribute("ref")&&(n[t.getAttribute("ref")]=t)}),n}(this,t)}}})}function v(t,e){for(var n in e)if(c(t.style[n]))return e[n]}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=Object.freeze({isUndefined:o,isExist:c,isNan:function(t){return isNaN(t)},isFun:u,isObj:l,isNull:f,isArr:e,isStr:m,isBoolean:n,isNum:d,isTrue:h,isFalse:p,isEmptyObj:function(t){for(var e in t)return!1;return!0},search:a,trim:y,forEach:g,clone:function(t){if(t instanceof Object)return c(JSON)?JSON.parse(JSON.stringify(t)):t},assign:t,objectKey:function(t){if(!t)return null;if(Object.keys)return Object.keys(t);var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},inArray:function(t,e){if(m(t)||d(e)){for(var n=0,o=e.length;n<o;n++)if(e[n]==t)return 1;return!1}return!1},isArray:b,paramsAndCallback:function(t,e){t&&e(t)}}),x=["onHeader","onBody","onFooter"],k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w=function(t,e,n){return e&&A(t.prototype,e),n&&A(t,n),t};function A(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function B(t){return c(t)?null:t.parentElement.removeChild?t.parentElement.removeChild(t):t.parentElement.removeNode(t)}function O(t){if(t.preventDefault)t.preventDefault();else{if(!t.stopPropagation)return!1;t.stopPropagation()}}function E(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function C(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)}var S=function(t,e){t.classList?t.setAttribute("class",e):t.className=e},I=function(t,e){t.setAttribute("id",e)};function T(t,e){for(var n="",o=t.length,i=0;i<o;i++)"object"==k(t[i])&&(n+=t[i][e]);return n}function D(t,e){var n=[Array.prototype.slice.apply(arguments).slice(2)];if(!m(e))return t.className||t.classList;if(t.classList)t.setAttribute("class",T(n[0],"classList")+e);else{if(!t.className)return null;t.setAttribute("class",T(n[0],"className")+e)}}var L={title:"",message:"",footerText:"",layout:"center",timeout:0,isGesture:!0,isDrag:!1,isClose:!0,onResize:!0,type:"",isMask:!0,animation:!0,customAnimation:"bounceIn",titleColor:"#9A9B9C",closeColor:"#9A9B9C",messageColor:"#696969",showCloseButton:!0,showCancleButton:!1,showConfirmButton:!0,cancleButtonText:"取消",confirmButtonText:"确定",cancleButtonColor:"#fff",confirmButtonColor:"#fff",cancleButtonBackground:"#aaa",confirmButtonBackground:"#51BF8C",methods:function(){},onDialogBefore:function(){},onHeaderBefore:function(){},onBodyBefore:function(){},onFooterBefore:function(){},onDialogAfter:function(){},onHeaderAfter:function(){},onBodyAfter:function(){},onFooterAfter:function(){},confirmCallback:function(){},cancleCallback:function(){}},j=["bounce","flash","pulse","rubberBand","shake","headShake","bounceOutLeft","swing","tada","wobble","jello","bounceIn","bounceInDown","fadeInDownBig","bounceInLeft","bounceInRight","bounceInUp","bounceOut","bounceOutDown","bounceOutRight","bounceOutUp","fadeIn","fadeInDown","rotateInUpLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","fadeOutDown","fadeOutDownBig","fadeOutLeft","fadeOutLeftBig","fadeOutRight","fadeOutUp","fadeOutUpBig","flipInX","flipInY","flipOutX","flipOutY","fadeInLeft","lightSpeedIn","lightSpeedOut","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpRight","rotateOut","rotateOutDownLeft","rotateOutDownRight","zoomOutLeft","hinge","jackInTheBox","rollIn","rollOut","zoomIn","zoomInDown","rotateOutUpRight","zoomInLeft","zoomInRight","zoomInUp","zoomOut","zoomOutDown","rotateOutUpLeft","zoomOutRight","zoomOutUp","slideInDown","slideInLeft","slideInRight","slideInUp","slideOutDown","slideOutLeft","slideOutRight","fadeOutRightBig","fadeOut","slideOutUp"],N={excuteAnimation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd",MSAnimation:"MSAnimationEnd"},H={excuteAnimation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart",MSAnimation:"MSAnimationStart"},R={header:".dialog-header",body:".dialog-body",footer:".dialog-footer"},z=(w(U,[{key:"animate",value:function(t){return this.listItems=[t],this}},{key:"usebind",value:function(t){var e=!0,n=!1,o=void 0;try{for(var i,a=j[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var r=i.value;U.prototype[r]=this.callAnimationApi}}catch(t){n=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw o}}}},{key:"callAnimationApi",value:function(t,e){this.animationName=t;var n=(this.animationConfig=e).callback;return"start"==e.type&&u(n)&&n(),this}},{key:"excuteAnimation",value:function(t,e,n){var o=document.querySelector(t),i=v(o,N),a=v(o,H);function r(){n.type,C(o,a,s)}"end"==n.type.toLowerCase()?D(o," "+e+" animatedHalf",o):D(o," "+e+" animated",o);var s=function t(){"end"==n.type.toLowerCase()?(n.callback(e),D(o,D(o).replace(" "+e+" animatedHalf",""),"")):D(o,D(o).replace(" "+e+" animated",""),""),C(o,i,t),C(o,a,r)};E(o,i,s),E(o,a,r)}},{key:"delay",value:function(t){return c(t)&&this.wait.push(Number(t)),this}},{key:"render",value:function(){this.excuteAnimation(this.listItems.slice(0),this.animationName,this.animationConfig)}}]),U);function U(t){r(this,U),this.listItems=[],this.wait=[],this.animationName="bounceOut",this.animationConfig={},this.usebind()}function F(t,e){var n=document.body,o=n.offsetWidth;if(e)D(n,t,document.body),D(document.documentElement,t,document.documentElement),n.style.paddingRight=n.offsetWidth-o+"px";else{var i=D(document.body)||D(document.documentElement);if(!c(i)||!a(i,t))return null;D(document.body,D(document.body).replace(t,""),""),D(document.documentElement,D(document.documentElement).replace(t,""),""),n.style.paddingRight=0}}var M=["header","body","footer"];function G(){var t=arguments.length<=0?void 0:arguments[0],e=t.obj,n=t.dialog,o=(t.mask,t.header),i=t.body,a=t.footer,r=t.footerButtonGroup,s=t.currentDialogElement;l(e)&&function(t,e,n,o,i){if(t.onDialogBefore||t.onHeaderBefore||t.onBodyBefore||t.onFooterBefore){if(u(t.onDialogBefore)){t.onDialogBefore.call(e,e)}if(u(t.onHeaderBefore)){t.onHeaderBefore.call(n,n)}if(u(t.onBodyBefore)){t.onBodyBefore.call(o,o)}if(u(t.onFooterBefore)){t.onFooterBefore.call(i,i)}}}(e,n,o,i,a),function(t,e){if(d(t.timeout)&&Number(t.timeout)>0){e.hide({timeout:t.timeout})}}(e,this),function(t,n,o){if(h(t.isDrag)){var i=true;var a={};var r={};var s={};if(h(t.isGesture)){n.style.cursor="move"}else{n.style.cursor="unset"}E(n,"mousedown",function(t){a={x:n.offsetLeft-document.body.scrollLeft,y:n.offsetTop-document.body.scrollTop};r={x:t.screenX,y:t.screenY};i=true;var e=function t(e){if(i){s={x:e.screenX,y:e.screenY};a.x+=s.x-r.x;a.y+=s.y-r.y;r=s;n.style.left=a.x+"px";n.style.top=a.y+"px"}};{E(o.$(document),"mousemove",e);E(o.$(document),"mouseup",function(t){C(n.ownerDocument,"mouseover",e);i=false;O(t)})}O(t)})}}(e,n,this),function(t,e,n){if(m(t.footerText)&&n.find(e,"[textGroup]")){n.find(e,"[textGroup]").innerHTML=t.footerText}else if(b(t.footerText)&&n.find(e,"[textGroup]")){if(t.footerText.length>0){n.find(e,"[textGroup]").innerHTML=t.footerText.concat().join("")}}else{if(n.find(e,"[textGroup]")){B(n.find(e,"[textGroup]"))}}}(e,a,this),function(t,e,n){if(p(t.isMask)&&n.find(e,"[mask]")){n.find(e,"[mask]").style.backgroundColor="transparent"}}(e,s,this),function(t,e,n,o,i){var a;if((a=i.find(e,"[title]"))&&a){a.innerHTML=t.title;a.style.color=t.titleColor}if((a=i.find(n,"[message]"))&&a){a.innerHTML=i.message||t.message;a.style.color=t.messageColor}if((a=i.find(o,"[confirm]"))&&a){a.textContent=t.confirmButtonText;a.style.color=t.confirmButtonColor;if(t.confirmButtonBackground=="#51BF8C");else a.style.backgroundColor=t.confirmButtonBackground}if((a=i.find(o,"[cancle]"))&&a){a.textContent=t.cancleButtonText;a.style.color=t.cancleButtonColor;if(t.cancleButtonBackground=="#aaa");else a.style.backgroundColor=t.cancleButtonBackground}if((a=i.find(e,"[close]"))&&a){a.style.color=t.closeColor}}(e,o,i,r,this),function(t,e,n){if(m(t.type)){var o=["success","error","warning","info","question"];var i=t.type.toLowerCase();switch(i){case o[0]:n.find(e,".codialog-icon-"+o[0]).style.display="flex";break;case o[1]:n.find(e,".codialog-icon-"+o[1]).style.display="flex";break;case o[2]:n.find(e,".codialog-icon-"+o[2]).style.display="flex";break;case o[3]:n.find(e,".codialog-icon-"+o[3]).style.display="flex";break;case o[4]:n.find(e,".codialog-icon-"+o[4]).style.display="flex";break;default:break}}}(e,i,this),function(t,n,o){if(u(t["methods"])){g(x,function(t,e){o[n[e]]=o[t]({children:o.rootDirectory[n[e]]})});t.methods.call(o,o.dialogElement)}}(e,M,this),function(o,t,e,i){if(h(o.isClose)){var n=i.$(i.dialogElement);var a=[];var r=i.find(t,"[close]");if(!f(r)){a.push(r)}var s=i.find(e,"[cancle]");if(!f(e),c(s)){a.push(s)}var l=i.find(e,"[confirm]");if(!f(e),!f(l)){a.push(l)}if(a.length>0){g(a,function(t,e){var n=t;n.onclick=function(t){if(i.setTimer){clearTimeout(i.setTimer)}i.hide();if(m(n.getAttribute("confirm"))&&u(o.confirmCallback)){o.confirmCallback()}else if(m(n.getAttribute("cancle"))&&u(o.cancleCallback)){o.cancleCallback()}i.closeBackValue=true}})}}}(e,o,r,this),function(t,e,n,o){var i,a,r;if(p(t.showCloseButton)&&(i=o.find(e,"[close]"))&&c(i)){i.style.display="none"}if(h(t.showCancleButton)&&(a=o.find(n,"[cancle]"))&&c(a)){a.style.display="inline-block"}if(p(t.showConfirmButton)&&(r=o.find(n,"[confirm]"))&&c(r)){r.style.display="none"}}(e,o,r,this),function(t,e,n,o,i){if(t.onDialogAfter||t.onHeaderAfter||t.onBodyAfter||t.onFooterAfter){if(u(t.onDialogAfter))t.onDialogAfter.call(e,e);if(u(t.onHeaderAfter))t.onHeaderAfter.call(n,n);if(u(t.onBodyAfter))t.onBodyAfter.call(o,o);if(u(t.onFooterAfter))t.onFooterAfter.call(i,i)}}(e,n,o,i,a),function(u,f,d){if(m(u.layout)&&u.layout.length)t();if(h(u.onResize))window.onresize=function(){return t()};function t(){var t=(document.documentElement||document.body).clientWidth;var e=(document.documentElement||document.body).clientHeight;var n=false;if(d.style.display!="block"){d.style.zIndex="-9999";d.style.display="block";n=true}var o=f.offsetWidth;var i=f.offsetHeight;if(n){d.style.display="none";n=false}d.style.zIndex="9999";var a={x:t/2,y:e/2};var r={x:o/2,y:i/2};var s=u.layout.toLowerCase().split(" ");s=s.filter(function(t){return t.length});function l(){f.style.left=a.x-r.x+"px";f.style.top=a.y-r.y+"px"}var c=10;if(s.length==1){s=y(s[0]);switch(s){case"center":l();break;case"left":f.style.left=c+"px";f.style.top=a.y-r.y+"px";break;case"right":f.style.left=t-o-c+"px";f.style.top=a.y-r.y+"px";break;case"top":f.style.left=a.x-r.x+"px";f.style.top=c+"px";break;case"bottom":f.style.left=a.x-r.x+"px";f.style.top=e-i-c+"px";break;default:l();break}}else if(s.length>1){s=s.join(" ");if(s=="left top"||s=="top left"){f.style.left=c+"px";f.style.top=c+"px"}else if(s=="left bottom"||s=="bottom left"){f.style.left=c+"px";f.style.top=e-i-c+"px"}else if(s=="right top"||s=="top right"){f.style.left=t-o+c+"px";f.style.top=c+"px"}else if(s=="right bottom"||s=="bottom right"){f.style.left=t-o+"px";f.style.top=e-i-c+"px"}else{l()}}}}(e,n,s)}function $(t){if(t.search(/^(\.|\#)/),t.slice(1).search(/^[\_|(a-zA-Z)]/)+1){var e=function(t){var e=document.createElement("div");return"."==t.charAt(0)&&S(e,t.slice(1)),"#"==t.charAt(0)&&I(e,t.slice(1)),e}(t);return e.innerHTML='\n<div mask="" class="codialog-mask" aria-hidden="false">\n    <div dialog="" class="codialog-frame" role="dialog" aria-dialog="true">\n        <div aria-dialogBox="true" class="codialog-box">\n            <div class="codialog-styles">\n                <div header="" class="codialog-styles-head dialog-header">\n                    <div class="codialog-head-content">\n                        <div title="" ref="title" class="codialog-head-title codialog-head-info">\n                            <span ></span>\n                        </div>\n                        <div close="" ref="close" class="codialog-head-close">\n                            <button type="button" class="addClose">×</button>\n                        </div>\n                    </div>\n                </div>\n                <div body="" class="codialog-styles-content dialog-body">\n                    <div class="codialog-content-message" dialog-body-overflow>\n                        <div class="codialog-icon codialog-icon-success">\n                            <div class="codialog-success-ring"></div>\n                            <span class="codialog-icon-success--line-small"></span>\n                            <span class="codialog-icon-success--line-long"></span>\n                        </div>\n                        <div class="codialog-icon codialog-icon-error">\n                            <span class="codialog-icon-error--line-left"></span>\n                            <span class="codialog-icon-error--line-right"></span>\n                        </div>\n                        <div class="codialog-icon codialog-icon-warning">\n                            <span class="codialog-icon-error--text">!</span>\n                        </div>\n                        <div class="codialog-icon codialog-icon-info">\n                            <span class="codialog-icon-info--text">!</span>\n                        </div>\n                        <div class="codialog-icon codialog-icon-question">\n                            <span class="codialog-icon-question--text">?</span>\n                        </div>\n                        <div message="" ref="message" class="codialog-message-text message-text codialog-text">\n                            <span></span>\n                        </div>\n                    </div>\n                </div>\n                <div footer="" class="codialog-styles-foot dialog-footer">\n                    <div class="codialog-foot-button codialog-foot-text">\n                        <div textGroup="" ref="text" class="codialog-text-group"></div>\n                        <div buttonGroup="" ref="button" class="codialog-button-group">\n                            <button type="button" confirm="" class="primary group-btn">确定</button>\n                            <button type="button" cancle="" class="cancle group-btn">取消</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'.replace(/(^|\n)\s*/g,""),document.body.appendChild(e),this.dialogElement=t||null,this.cacheDialogElement.push(t),!0}return!1}var _=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(P,z),w(P,[{key:"app",value:function(t){if((this.tracker=!1)||function(t){return t!==document.body&&document.body.contains(t)}(this.$(t)))this.dialogElement=t,this.tracker=!0;else if(!$.call(this,t))return this.tracker=!1,window.console.warn('this methods .app("'+t+'") accepts wrong parameters.you must define correct "class" and "id" and "_"')&&!1;return this.show()&&this}},{key:"hide",value:function(t){var e=this,n=this.$(this.dialogElement);return this.isObj(t)?"timeout"in t&&(this.isNum(t.timeout)&&(this.setTimer=setTimeout(function(){e.setTimer&&clearTimeout(e.setTimer),n.style.display="none",F(" codialog-show",!1)},t.timeout)),this.isFun(t.callback)&&t.callback(n)):this.isUndefined(t)&&function(t,e){null!=v(e,N)?this.animate(t).delay(100).fadeOut("fadeOut",{type:"end",callback:function(){e.style.display="none",F(" codialog-show",!1)}}).render():(e.style.display="none",F(" codialog-show",!1))}.call(this,this.dialogElement+" [mask]",n),this}},{key:"show",value:function(t){var e=this,n=this.$(this.dialogElement);return this.isObj(t)?"timeout"in t&&(this.isNum(t.timeout)&&(this.setTimer=setTimeout(function(){e.setTimer&&clearTimeout(e.setTimer),n.style.display="block",F(" codialog-show",!0),t.timeout=null},t.timeout)),this.isFun(t.callback)&&t.callback(n)):this.isUndefined(t)&&function(t,e){var n="bounceIn";null!=v(e,N)?(p(this.hasAnimation)&&(n=this.customAnimation||n),this.animate(t).delay(100)[n](n,{type:"start",callback:function(){e.style.display="block",F(" codialog-show",!0)}}).render()):(e.style.display="block",F(" codialog-show",!0))}.call(this,this.dialogElement+" [dialog]",n),this}},{key:"use",value:function(t,e){var n=this,o=this.$(this.dialogElement),i=this.find(o,"[dialog]"),a=this.find(o,"[mask]"),r=this.find(o,"[header]"),s=this.find(o,"[body]"),l=this.find(o,"[footer]"),c=this.find(l,"[buttonGroup]");if(this.assign(this.rootDirectory,{dialog:i,mask:a,header:r,body:s,footer:l}),this.isStr(t)&&(this.xString=arguments,this.xString)){switch(this.xString.length){case 1:t={message:this.xString[0],onHeaderBefore:function(){this.style.display="none"}};break;case 2:t={title:this.xString[0],message:this.isStr(this.xString[1])?this.xString[1]:"No message text"};break;case 3:default:t={title:this.xString[0],message:this.isStr(this.xString[1])?this.xString[1]:"No message",type:this.isStr(this.xString[2])?this.xString[2]:""}}this.xString=[]}t=this.assign(this.clone(L),t),G.apply(this,[{obj:t,dialog:i,mask:a,header:r,body:s,footer:l,footerButtonGroup:c,currentDialogElement:o}]);var u=!1;return a.onclick=function(t){if(u)return u=!1,null;((t=t||window.event).target||t.srcElement)==a&&(n.setTimer&&clearTimeout(n.setTimer),n.$(n.dialogElement).style.display="none",D(document.body,D(document.body).replace(" codialog-show",""),""),D(document.documentElement,D(document.documentElement).replace(" codialog-show",""),""),document.body.style.paddingRight=0)},i.onmousedown=function(){a.onmouseup=function(t){a.onmouseup=null,((t=t||window.event).target||t.srcElement)==a&&(u=!0)}},a.onmousedown=function(){i.onmouseup=function(t){i.onmouseup=null,((t=t||window.event).target||t.srcElement)!=i&&!i.contains(t.target||t.srcElement)||(u=!0)}},this.isBoolean(t.animation)&&o&&(t.animation?this.hasAnimation=!0:this.isStr(t.customAnimation)&&(this.hasAnimation=!1,this.customAnimation=t.customAnimation)),this}},{key:"$",value:function(t){return 9===t.nodeType?t.documentElement:this.isFun(t.HTMLDocument)?t:this.find(document.body,t)}},{key:"find",value:function(t,e,n){if("object"==(void 0===t?"undefined":k(t))&&this.isStr(e))return this.isArr(n)?function(t,e){return t.querySelectorAll(""+e)}(t||t.ownerDocument,e):function(t,e){return t.querySelector(""+e)}(t||t.ownerDocument,e)}}]),P);function P(t){r(this,P);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,t));return e.name="Coog",e.xString=[],e.setTimer=null,e.tracker=!1,e.mouseoutcount=0,e.version="v2.1.6",e.rootDirectory={},e.didDialogList=[],e.hasAnimation=!0,e.closeBackValue=!1,e.cacheDialogElement=[],e.customAnimation="bounceOut",e.strict=R,e.dialogElement=t||null,i(P.prototype),e}function q(){}t(_.prototype,s),q.app=function(t){return(new _).app(t)},q.$=function(t){return(new _).$(t)};function W(t){r(this,W)}return Object.assign(W,q),Object.assign(W.prototype,_.prototype),W});