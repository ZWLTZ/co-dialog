<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title>demo1</title>
</head>
<body>

</body>
<!-- <script type="text/javascript" src="./../application.js"></script>
<script type="text/javascript" src="./../template.js"></script>
<script type="text/javascript" src="./../style.js"></script>
<script type="text/javascript" src="./../context.js"></script>
<script type="text/javascript" src="./../properties.js"></script>
<script type="text/javascript" src="./../event.js"></script>
<script type="text/javascript" src="./../dom.js"></script>
<script type="text/javascript" src="./../animation.js"></script>
<script type="text/javascript" src="./../index.js"></script> -->

<script type="text/javascript">
// 设想 = 构建脚本 组装脚本 生成脚本 建立脚本
// 梳理 = 建立脚本[创建] 生成脚本[使用底层dom] 构建脚本[传入参数] 验证脚本[测试] 组装脚本[合并]	

function buildScript (_script) {
	return document.createElement(_script);
}

function generateScript () {
	var getBuildScript = buildScript('script');
	getBuildScript.type = 'text/javascript';
	return getBuildScript;
}

function contructorScript (_url) {
	var getGenerateScript = generateScript();

	if(_url instanceof Function) {
		getGenerateScript.innerHTML = '(' + _url.toString() + ')(window)';
	}
	else if(typeof _url == 'string'){
		getGenerateScript.src = _url;
	}

	return getGenerateScript
}

function headNode () {
	if(document.head) return document.head;
	return document.querySelector('head');
}

function testScript (_url) {
	try {
		var res = contructorScript(_url);
		if(res) {
			return res
		}
		throw 'create script error.'
	}
	catch(err) {
		return err
	}
}

function function_name(argument) {
	// body...
}

function composeScript () {
	var getHeadNode = headNode();

	var getTestScript = [testScript];

	return function (_url_or_fn, win_plugin_name, callPlugin) {
		getHeadNode.appendChild(getTestScript[0](_url_or_fn))

		if(typeof win_plugin_name == 'string') {

			return function inject (callPlugin) {
				setTimeout(function () {
					var co = window[win_plugin_name];
					if(typeof co == 'undefined') {
						return inject(callPlugin)
					}
					return callPlugin()
				},5)

			}(callPlugin)
		}

	}
}

var poolScript = composeScript()

poolScript("./../application.js")
poolScript("./../template.js")
poolScript("./../style.js")
poolScript("./../context.js")
poolScript("./../properties.js")
poolScript("./../event.js")
poolScript("./../dom.js")
poolScript("./../animation.js")
poolScript("./../index.js", 'coog', function () {
	coog.app('.app').use({
		title: '123',
		message: "yes"
	}).show()
})
</script>

</html>
